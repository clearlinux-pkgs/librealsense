From 09f5252fb7d299dbb5d38168eda4ac2cfb9e8494 Mon Sep 17 00:00:00 2001
From: Miguel Bernal Marin <miguel.bernal.marin@linux.intel.com>
Date: Sat, 26 Mar 2016 14:11:08 -0600
Subject: [PATCH 1/3] makefile: fix install target

Add DESTDIR, prefix and LIB_SUFFIX
remove ldconfig
---
 Makefile | 11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)

diff --git a/Makefile b/Makefile
index 413969a..f0706c1 100644
--- a/Makefile
+++ b/Makefile
@@ -43,14 +43,17 @@ EXAMPLES := $(wildcard examples/*.c)
 EXAMPLES += $(wildcard examples/*.cpp)
 EXAMPLES := $(addprefix bin/, $(notdir $(basename $(EXAMPLES))))
 
+# Determine to where librealsense will be istalled
+prefix ?= /usr/local
+
 # Aliases for convenience
 all: examples $(EXAMPLES)
 
 install: library
-	install -m755 -d /usr/local/include/librealsense
-	cp -r include/librealsense/* /usr/local/include/librealsense
-	cp lib/librealsense.so /usr/local/lib
-	ldconfig
+	install -m755 -d $(DESTDIR)$(prefix)/include/librealsense
+	install -m755 -d $(DESTDIR)$(prefix)/lib$(LIB_SUFFIX)
+	cp -r include/librealsense/* $(DESTDIR)$(prefix)/include/librealsense
+	cp lib/librealsense.so $(DESTDIR)$(prefix)/lib$(LIB_SUFFIX)
 
 clean:
 	rm -rf obj
-- 
2.4.3

